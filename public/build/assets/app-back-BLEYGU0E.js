document.addEventListener("DOMContentLoaded",()=>{if(document.getElementById("dashboard")){const l=[12,19,3,5,2,3],e=[300,50,100];new Chart(document.getElementById("ventasChart"),{type:"bar",data:{labels:["Ene","Feb","Mar","Abr","May","Jun"],datasets:[{label:"Ventas",data:l}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}}}),new Chart(document.getElementById("usuariosChart"),{type:"pie",data:{labels:["Activos","Inactivos","Pendientes"],datasets:[{data:e}]},options:{responsive:!0}})}});document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("hamburgerBtn")||document.getElementById("adminMenuBtn"),e=document.getElementById("navLinks")||document.getElementById("adminMenu"),t=document.getElementById("backdrop")||document.getElementById("adminMenuBackdrop"),n=document.getElementById("closeBtn")||document.getElementById("adminMenuClose");if(l&&e&&t&&n){let s=function(){e.classList.remove("opacity-0","pointer-events-none","-translate-x-full"),e.classList.add("opacity-100","pointer-events-auto","translate-x-0"),t.classList.remove("opacity-0","pointer-events-none"),t.classList.add("opacity-100","pointer-events-auto")},r=function(){e.classList.add("opacity-0","pointer-events-none","-translate-x-full"),e.classList.remove("opacity-100","pointer-events-auto","translate-x-0"),t.classList.add("opacity-0","pointer-events-none"),t.classList.remove("opacity-100","pointer-events-auto")};var d=s,i=r;l.addEventListener("click",s),n.addEventListener("click",r),t.addEventListener("click",r)}});document.addEventListener("DOMContentLoaded",()=>{var r;(r=document.getElementById("buttonNuevaPelicula"))==null||r.addEventListener("click",()=>{var o;(o=document.getElementById("modal-create"))==null||o.showModal()}),document.querySelectorAll("button.edit").forEach(o=>{o.addEventListener("click",c=>{l("edit-"+c.currentTarget.dataset.idpelicula)})}),document.querySelectorAll("button.delete").forEach(o=>{o.addEventListener("click",c=>{const a=document.getElementById("modal-delete-"+c.currentTarget.dataset.idpelicula);a==null||a.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(o=>{o.addEventListener("click",()=>{const c=o.getAttribute("data-close-modal");e(c)})});function l(o){const c=document.getElementById("modal-"+o),a=document.getElementById("backdrop-"+o);c&&a&&(c.showModal(),a.classList.remove("hidden"))}function e(o){const c=document.getElementById("modal-"+o),a=document.getElementById("backdrop-"+o);c&&a&&(c.close(),a.classList.add("hidden"))}document.querySelectorAll("dialog").forEach(o=>{o.addEventListener("keydown",c=>{if(c.key==="Escape"){const a=o.id.replace("modal-","");e(a)}}),o.addEventListener("click",c=>{const a=o.getBoundingClientRect();if(c.clientX<a.left||c.clientX>a.right||c.clientY<a.top||c.clientY>a.bottom){const m=o.id.replace("modal-","");e(m)}})});const t=document.getElementById("flash-message");t&&setTimeout(()=>t.remove(),4e3);const n=document.getElementById("resetFiltros"),d=n==null?void 0:n.closest("form");n&&d&&n.addEventListener("click",o=>{o.preventDefault(),d.querySelectorAll("input, select").forEach(c=>{c.tagName==="SELECT"?c.selectedIndex=0:c.value=""}),d.submit()});const i=document.querySelector('input[name="fecha_estreno"]'),s=document.querySelector('input[name="fecha_emision"]');i&&s&&(i.addEventListener("change",()=>{s.min=i.value,s.value&&s.value<i.value&&(s.value="")}),i.value&&(s.min=i.value))});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-open-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-open-modal"),n=document.getElementById("modal-"+t);n&&n.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-close-modal"),n=document.getElementById("modal-"+t);n&&n.close()})}),document.querySelectorAll("[data-close-flash]").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("flash-message");t&&t.remove()})}),document.querySelectorAll("dialog").forEach(e=>{e.addEventListener("click",t=>{const n=e.getBoundingClientRect();(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom)&&e.close()}),e.addEventListener("keydown",t=>{t.key==="Escape"&&e.close()})}),document.querySelectorAll('input[name="cantidadFilas"], input[name="cantidadColumnas"]').forEach(e=>{e.addEventListener("input",()=>{let t=parseInt(e.value);t>13&&(e.value=13),t<5&&(e.value=5)})});const l=document.getElementById("flash-message");l&&setTimeout(()=>l.remove(),4e3)});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-open-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-open-modal"),n=document.getElementById("modal-"+t);n&&n.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-close-modal"),n=document.getElementById("modal-"+t);n&&n.close()})}),document.querySelectorAll("[data-close-flash]").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("flash-message");t&&t.remove()})}),document.querySelectorAll("dialog").forEach(e=>{e.addEventListener("click",t=>{const n=e.getBoundingClientRect();(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom)&&e.close()}),e.addEventListener("keydown",t=>{t.key==="Escape"&&e.close()})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll('input[type="datetime-local"]');if(e.length>0){const t=new Date;t.setSeconds(0,0);const n=t.toISOString().slice(0,16);e.forEach(d=>{d.min=n,d.value&&d.value<n&&(d.value="")})}});const l=document.getElementById("flash-message");l&&setTimeout(()=>l.remove(),4e3)});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-open-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-open-modal"),n=document.getElementById("modal-"+t);n&&n.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-close-modal"),n=document.getElementById("modal-"+t);n&&n.close()})}),document.querySelectorAll("[data-close-flash]").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("flash-message");t&&t.remove()})}),document.querySelectorAll("[data-edit-slider]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-id"),n=e.getAttribute("data-pelicula-id"),d=document.getElementById("sliderForm");d.action=`/adminSH/sliders/${t}`,document.getElementById("modalTitle").innerText="Editar Slider",document.getElementById("sliderMethod").value="PUT";const i=document.getElementById("idPelicula");for(let r=0;r<i.options.length;r++)if(parseInt(i.options[r].value)===parseInt(n)){i.selectedIndex=r;break}const s=document.getElementById("modal-create");s&&s.showModal()})}),document.querySelectorAll("dialog").forEach(e=>{e.addEventListener("click",t=>{const n=e.getBoundingClientRect();(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom)&&e.close()}),e.addEventListener("keydown",t=>{t.key==="Escape"&&e.close()})});const l=document.getElementById("flash-message");l&&setTimeout(()=>l.remove(),4e3),document.querySelectorAll(".toggle-activo").forEach(e=>{e.addEventListener("change",function(){const t=this.dataset.id,n=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch(`/adminSH/peliculas/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n,Accept:"application/json"}}).then(d=>d.json()).then(d=>{d.success||(alert("No se pudo cambiar el estado"),this.checked=!this.checked)}).catch(d=>{console.error(d),alert("Error al cambiar el estado"),this.checked=!this.checked})})})});
