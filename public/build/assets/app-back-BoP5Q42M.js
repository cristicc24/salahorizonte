document.addEventListener("DOMContentLoaded",()=>{if(document.getElementById("dashboard")){const a=[12,19,3,5,2,3],e=[300,50,100];new Chart(document.getElementById("ventasChart"),{type:"bar",data:{labels:["Ene","Feb","Mar","Abr","May","Jun"],datasets:[{label:"Ventas",data:a}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}}}),new Chart(document.getElementById("usuariosChart"),{type:"pie",data:{labels:["Activos","Inactivos","Pendientes"],datasets:[{data:e}]},options:{responsive:!0}})}});document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("hamburgerBtn")||document.getElementById("adminMenuBtn"),e=document.getElementById("navLinks")||document.getElementById("adminMenu"),t=document.getElementById("backdrop")||document.getElementById("adminMenuBackdrop"),n=document.getElementById("closeBtn")||document.getElementById("adminMenuClose");if(a&&e&&t&&n){let d=function(){e.classList.remove("opacity-0","pointer-events-none","-translate-x-full"),e.classList.add("opacity-100","pointer-events-auto","translate-x-0"),t.classList.remove("opacity-0","pointer-events-none"),t.classList.add("opacity-100","pointer-events-auto")},o=function(){e.classList.add("opacity-0","pointer-events-none","-translate-x-full"),e.classList.remove("opacity-100","pointer-events-auto","translate-x-0"),t.classList.add("opacity-0","pointer-events-none"),t.classList.remove("opacity-100","pointer-events-auto")};var l=d,s=o;a.addEventListener("click",d),n.addEventListener("click",o),t.addEventListener("click",o)}});document.addEventListener("DOMContentLoaded",()=>{var s;(s=document.getElementById("buttonNuevaPelicula"))==null||s.addEventListener("click",()=>{var d;(d=document.getElementById("modal-create"))==null||d.showModal()}),document.querySelectorAll("button.edit").forEach(d=>{d.addEventListener("click",o=>{a("edit-"+o.currentTarget.dataset.idpelicula)})}),document.querySelectorAll("button.delete").forEach(d=>{d.addEventListener("click",o=>{const c=document.getElementById("modal-delete-"+o.currentTarget.dataset.idpelicula);c==null||c.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(d=>{d.addEventListener("click",()=>{const o=d.getAttribute("data-close-modal");e(o)})});function a(d){const o=document.getElementById("modal-"+d),c=document.getElementById("backdrop-"+d);o&&c&&(o.showModal(),c.classList.remove("hidden"))}function e(d){const o=document.getElementById("modal-"+d),c=document.getElementById("backdrop-"+d);o&&c&&(o.close(),c.classList.add("hidden"))}document.querySelectorAll("dialog").forEach(d=>{d.addEventListener("keydown",o=>{if(o.key==="Escape"){const c=d.id.replace("modal-","");e(c)}}),d.addEventListener("click",o=>{const c=d.getBoundingClientRect();if(o.clientX<c.left||o.clientX>c.right||o.clientY<c.top||o.clientY>c.bottom){const i=d.id.replace("modal-","");e(i)}})});const t=document.getElementById("flash-message");t&&setTimeout(()=>t.remove(),5e3);const n=document.getElementById("resetFiltros"),l=n==null?void 0:n.closest("form");n&&l&&n.addEventListener("click",d=>{d.preventDefault(),l.querySelectorAll("input, select").forEach(o=>{o.tagName==="SELECT"?o.selectedIndex=0:o.value=""}),l.submit()})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-open-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-open-modal"),n=document.getElementById("modal-"+t);n&&n.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-close-modal"),n=document.getElementById("modal-"+t);n&&n.close()})}),document.querySelectorAll("[data-close-flash]").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("flash-message");t&&t.remove()})}),document.querySelectorAll("dialog").forEach(e=>{e.addEventListener("click",t=>{const n=e.getBoundingClientRect();(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom)&&e.close()}),e.addEventListener("keydown",t=>{t.key==="Escape"&&e.close()})}),document.querySelectorAll('input[name="cantidadFilas"], input[name="cantidadColumnas"]').forEach(e=>{e.addEventListener("input",()=>{let t=parseInt(e.value);t>13&&(e.value=13),t<5&&(e.value=5)})});const a=document.getElementById("flash-message");a&&setTimeout(()=>a.remove(),5e3)});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-open-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-open-modal"),n=document.getElementById("modal-"+t);n&&n.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-close-modal"),n=document.getElementById("modal-"+t);n&&n.close()})}),document.querySelectorAll("[data-close-flash]").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("flash-message");t&&t.remove()})}),document.querySelectorAll("dialog").forEach(e=>{e.addEventListener("click",t=>{const n=e.getBoundingClientRect();(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom)&&e.close()}),e.addEventListener("keydown",t=>{t.key==="Escape"&&e.close()})});const a=document.getElementById("flash-message");a&&setTimeout(()=>a.remove(),5e3)});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-open-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-open-modal"),n=document.getElementById("modal-"+t);n&&n.showModal()})}),document.querySelectorAll("[data-close-modal]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-close-modal"),n=document.getElementById("modal-"+t);n&&n.close()})}),document.querySelectorAll("[data-close-flash]").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("flash-message");t&&t.remove()})}),document.querySelectorAll("[data-edit-slider]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-id"),n=e.getAttribute("data-pelicula-id"),l=document.getElementById("sliderForm");l.action=`/adminSH/sliders/${t}`,document.getElementById("modalTitle").innerText="Editar Slider",document.getElementById("sliderMethod").value="PUT";const s=document.getElementById("idPelicula");for(let o=0;o<s.options.length;o++)if(parseInt(s.options[o].value)===parseInt(n)){s.selectedIndex=o;break}const d=document.getElementById("modal-create");d&&d.showModal()})}),document.querySelectorAll("dialog").forEach(e=>{e.addEventListener("click",t=>{const n=e.getBoundingClientRect();(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom)&&e.close()}),e.addEventListener("keydown",t=>{t.key==="Escape"&&e.close()})});const a=document.getElementById("flash-message");a&&setTimeout(()=>a.remove(),5e3),document.querySelectorAll(".toggle-activo").forEach(e=>{e.addEventListener("change",function(){const t=this.dataset.id,n=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch(`/adminSH/peliculas/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n,Accept:"application/json"}}).then(l=>l.json()).then(l=>{l.success||(alert("No se pudo cambiar el estado"),this.checked=!this.checked)}).catch(l=>{console.error(l),alert("Error al cambiar el estado"),this.checked=!this.checked})})})});
